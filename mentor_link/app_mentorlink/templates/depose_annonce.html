{% extends "home.html" %}

{% block title %}Mentorlink - Déposer une annonce{% endblock %}

{% block content %}
<div class="container mt-5 d-flex justify-content-center">
    <div class="card shadow-lg p-4" style="width: 50rem;">
        <h2 class="text-center mb-4 text-primary">Déposez votre annonce</h2>
        <form method="POST" action="" class="needs-validation" novalidate>
            {% csrf_token %}
            <div class="form-group">
                {{ form.prix.label_tag }}
                {{ form.prix }}
                <small id="prixCount" class="form-text text-muted">0 caractères (max 10)</small>
            </div>
            <div class="form-group">
                {{ form.url_photo.label_tag }}
                {{ form.url_photo }}
                <small id="urlPhotoCount" class="form-text text-muted">0 caractères (max 255)</small>
            </div>
            <div class="form-group">
                {{ form.metier.label_tag }}
                {{ form.metier }}
                <small id="metierCount" class="form-text text-muted">0 caractères (max 50)</small>
            </div>
            <div class="form-group">
                {{ form.adresse.label_tag }}
                {{ form.adresse }}
                <small id="adresseCount" class="form-text text-muted">0 caractères (max 100)</small>
            </div>
            <div class="form-group">
                {{ form.description.label_tag }}
                {{ form.description }}
                <small id="descriptionCount" class="form-text text-muted">0 caractères (max 500)</small>
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-orange btn-lg mt-3">Publier l'annonce</button>
            </div>
        </form>
    </div>
</div>

<style>
    body {
        background: #ffffff;
        color: #333;
        font-family: 'Arial', sans-serif;
    }
    .card {
        border-radius: 15px;
        background: #ffffff;
        color: #333;
    }
    .btn-orange {
        background-color: #ff9800;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        font-size: 18px;
        color: white;
    }
    .btn-orange:hover {
        background-color: #e68900;
    }
    h2 {
        font-weight: bold;
    }
    .form-group label {
        font-weight: bold;
        color: #333;
    }
</style>

<script>
    function updateCharacterCount(fieldId, counterId, maxLength) {
        let inputField = document.getElementById(fieldId);
        let charCount = document.getElementById(counterId);
        let length = inputField.value.length;
        charCount.textContent = length + " caractères (max " + maxLength + ")";
        if (length > maxLength) {
            charCount.style.color = "red";
            inputField.value = inputField.value.substring(0, maxLength);
        } else {
            charCount.style.color = "black";
        }
    }
    
    document.addEventListener("DOMContentLoaded", function() {
        document.getElementById("id_prix").setAttribute("maxlength", "10");
        document.getElementById("id_url_photo").setAttribute("maxlength", "255");
        document.getElementById("id_metier").setAttribute("maxlength", "50");
        document.getElementById("id_adresse").setAttribute("maxlength", "100");
        document.getElementById("id_description").setAttribute("maxlength", "500");
        
        document.getElementById("id_prix").addEventListener("input", function() {
            updateCharacterCount("id_prix", "prixCount", 10);
        });
        document.getElementById("id_url_photo").addEventListener("input", function() {
            updateCharacterCount("id_url_photo", "urlPhotoCount", 255);
        });
        document.getElementById("id_metier").addEventListener("input", function() {
            updateCharacterCount("id_metier", "metierCount", 50);
        });
        document.getElementById("id_adresse").addEventListener("input", function() {
            updateCharacterCount("id_adresse", "adresseCount", 100);
        });
        document.getElementById("id_description").addEventListener("input", function() {
            updateCharacterCount("id_description", "descriptionCount", 500);
        });
    });
</script>

{% endblock %}
